abi table - populated when a new ABI comes out, usually with each new release.
            entries manually added

packages_last_checked - list of abi and (head/quarterly) pairs 
                        records dates and times last updated.


To populate packages_last_checked:

INSERT INTO packages_last_checked(abi_id, branch_id)
SELECT ABI_HEAD.id, GetBranchId('head')
  FROM ABI ABI_HEAD
 WHERE NOT EXISTS (SELECT *
                     FROM packages_last_checked PLC
                    WHERE PLC.abi_id    = ABI_HEAD.id
                      AND PLC.branch_id = GetBranchId('head'))
UNION
SELECT ABI_QTR.id, GetBranchId(GetQuarterlyBranchName())
  FROM ABI ABI_QTR
 WHERE NOT EXISTS (SELECT *
                     FROM packages_last_checked PLC
                    WHERE PLC.abi_id    = ABI_QTR.id
                      AND PLC.branch_id = GetBranchId(GetQuarterlyBranchName()));


* to check the repos for new information

These are the things you want to check:

  select name, 'latest' as branch 
    from ABI 
   where active 
UNION
  select name, 'quarterly' as branch
    from ABI
   where active
order by name, branch;


If something newer is found, update the packages_last_checked, and set a flag.

A job will be launched to deal with the new data.

